
//this eill handle our sockt io connection
const io=require('socket.io')(8000)//cahnigng rom this this to this because this issue//access to XMLHttpRequest at 'http://localhostccess to XMLHttpRequest at 'http://localhost:8000/socket.io/?EIO=4&transport=polling&t=P8tU8p_' from origin 'http://127.0.0.1:5500' has been blocked by CORS policy 



const users = {};

io.on('connection', socket => {
  console.log('New connection established');

  socket.on('user-joined', name => {
    console.log('New user:', name);
    users[socket.id] = name;
    socket.broadcast.emit('user-joined', name);
  });

  socket.on('send', message => {
    socket.broadcast.emit('receive', { message: message, name: users[socket.id] });
  });
});


socket.on('disconnect', message => {
    socket.broadcast.emit('left', users[socket.id] );
    delete users[socket.id];
 
});
